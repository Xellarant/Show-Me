<!DOCTYPE html>

<html>
<head> <!-- Always Enter a Title! -->
        <title>User Profile</title>        

        <!-- <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *; img-src 'self' data: content:;">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width"> -->
        
        <script type="text/javascript" src="js/jquery.js"></script>
        <!-- <script type="text/javascript" src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.js"></script> -->
        <script type="text/javascript" src="js/index.js"></script>
        
        <script type="text/javascript">
            
            $(document).ready(function() {
                
                $.ajax({
                    type: "POST",
                    url: (domainString + "/php/getSession.php"),
                    crossDomain: true,
                    cache: false,
                    beforeSend: function(){ console.log("grabbing user session...");},
                    success: function(data){
                        //alert(data);
                        if(data.toString().includes("failed"))
                        {
                            alert("error grabbing session!");
                        }
                        else {
                            var session = JSON.parse(data);
                            //alert("session: " + session);
                            // alert(`Welcome, back, ${session.firstname}.`);
                            sessionStorage.setItem("session", session);
                            console.log(session);
                            document.getElementById("username").innerHTML=session.username;
                            console.log(`username updated to ${session.username}.`);
                            document.getElementById("firstname").innerHTML=session.firstname;
                            console.log(`firstname updated to ${session.firstname}.`);
                            document.getElementById("lastname").innerHTML=session.lastname;
                            console.log(`lastname updated to ${session.lastname}.`);
                            document.getElementById("email").innerHTML=session.email;
                            console.log(`email updated to ${session.email}.`);
                            //alert("#username text changed.");                        
                        }
                        // alert("redirecting to user profile.");
                        // window.location.href = "profile.html";
                    } // end success function
                }); // end ajax.

            
            }); // end document.ready
        </script>
    </head>
<body>                
        
<div class="card">
  <img id="userImage" style="width:100%">
  <h1 id="username">User</h1>
  <h2 id="firstname">Firstname</h2>
  <h2 id="lastname">Lastname</h2>
  <h2 id="email">Email</h2>
 <p><a href="favorites.html"><button class="button-style">Favorites</button></a></p>
</div>


</body>
</html>
